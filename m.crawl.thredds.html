<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN">
<html>
<head>
<title>GRASS GIS manual: m.crawl.thredds</title>
<meta http-equiv="Content-Type" content="text/html; charset=iso-8859-1">
<link rel="stylesheet" href="grassdocs.css" type="text/css">
</head>
<body bgcolor="white">
<div id="container">

<a href="file:///usr/lib/grass78/docs/html/index.html"><img src="grass_logo.png" alt="GRASS logo"></a>
<hr class="header">

<h2>NAME</h2>
<em><b>m.crawl.thredds</b></em>  - List dataset urls from a Thredds Data Server (TDS) catalog.
<h2>KEYWORDS</h2>
<a href="file:///usr/lib/grass78/docs/html/temporal.html">temporal</a>, <a href="file:///usr/lib/grass78/docs/html/topic_import.html">import</a>, <a href="file:///usr/lib/grass78/docs/html/keywords.html#download">download</a>, <a href="file:///usr/lib/grass78/docs/html/keywords.html#data">data</a>, <a href="file:///usr/lib/grass78/docs/html/keywords.html#metadata">metadata</a>, <a href="file:///usr/lib/grass78/docs/html/keywords.html#netcdf">netcdf</a>, <a href="file:///usr/lib/grass78/docs/html/keywords.html#thredds">thredds</a>, <a href="file:///usr/lib/grass78/docs/html/keywords.html#opendap">opendap</a>
<h2>SYNOPSIS</h2>
<div id="name"><b>m.crawl.thredds</b><br></div>
<b>m.crawl.thredds --help</b><br>
<div id="synopsis"><b>m.crawl.thredds</b> <b>input</b>=<em>string</em>  [<b>print</b>=<em>string</em>[,<i>string</i>,...]]  <b>services</b>=<em>string</em>[,<i>string</i>,...]  [<b>filter</b>=<em>string</em>]   [<b>skip</b>=<em>string</em>[,<i>string</i>,...]]   [<b>output</b>=<em>name</em>]   [<b>separator</b>=<em>character</em>]   [<b>modified_before</b>=<em>string</em>]   [<b>modified_after</b>=<em>string</em>]   [<b>authentication</b>=<em>name</em>]   [<b>nprocs</b>=<em>Number of cores</em>]   [--<b>overwrite</b>]  [--<b>help</b>]  [--<b>verbose</b>]  [--<b>quiet</b>]  [--<b>ui</b>] 
</div>

<div id="flags">
<h3>Flags:</h3>
<dl>
<dt><b>--overwrite</b></dt>
<dd>Allow output files to overwrite existing files</dd>
<dt><b>--help</b></dt>
<dd>Print usage summary</dd>
<dt><b>--verbose</b></dt>
<dd>Verbose module output</dd>
<dt><b>--quiet</b></dt>
<dd>Quiet module output</dd>
<dt><b>--ui</b></dt>
<dd>Force launching GUI dialog</dd>
</dl>
</div>

<div id="parameters">
<h3>Parameters:</h3>
<dl>
<dt><b>input</b>=<em>string</em>&nbsp;<b>[required]</b></dt>
<dd>URL of a catalog on a thredds server</dd>

<dt><b>print</b>=<em>string[,<i>string</i>,...]</em></dt>
<dd>Additional information to print</dd>
<dd>Options: <em>service, dataset_size</em></dd>

<dt><b>services</b>=<em>string[,<i>string</i>,...]</em>&nbsp;<b>[required]</b></dt>
<dd>Services of thredds server to crawl</dd>
<dd>Comma separated list of services names (lower case) of thredds server to crawl, typical services are: httpserver, netcdfsubset, opendap, wms</dd>
<dd>Default: <em>httpserver</em></dd>

<dt><b>filter</b>=<em>string</em></dt>
<dd>Regular expression for filtering dataset and catalog URLs</dd>
<dd>Default: <em>.*</em></dd>

<dt><b>skip</b>=<em>string[,<i>string</i>,...]</em></dt>
<dd>Regular expression(s) for skipping sub-catalogs / URLs (e.g. ".*jpeg.*,.*metadata.*)"</dd>

<dt><b>output</b>=<em>name</em></dt>
<dd>Name of the output file (stdout if omitted)</dd>
<dd>Default: <em>-</em></dd>

<dt><b>separator</b>=<em>character</em></dt>
<dd>Field separator</dd>
<dd>Special characters: pipe, comma, space, tab, newline</dd>
<dd>Default: <em>pipe</em></dd>

<dt><b>modified_before</b>=<em>string</em></dt>
<dd>Latest modification timestamp of datasets to include in the output</dd>
<dd>ISO-formated date or timestamp (e.g. "2000-01-01T12:12:55.03456Z" or "2000-01-01")</dd>

<dt><b>modified_after</b>=<em>string</em></dt>
<dd>Earliest modification timestamp of datasets to include in the output</dd>
<dd>ISO-formated date or timestamp (e.g. "2000-01-01T12:12:55.03456Z" or "2000-01-01")</dd>

<dt><b>authentication</b>=<em>name</em></dt>
<dd>Authentication for thredds server</dd>
<dd>File with authentication information (username and password) for thredds server</dd>

<dt><b>nprocs</b>=<em>Number of cores</em></dt>
<dd>Number of cores to use for crawling thredds server</dd>
<dd>Default: <em>1</em></dd>

</dl>
</div>
<div class="toc">
<h4 class="toc">Table of contents</h4>
<ul class="toc">
    <li class="toc"><a href="#description" class="toc">DESCRIPTION</a></li>
    <li class="toc"><a href="#notes" class="toc">NOTES</a></li>
    <li class="toc"><a href="#examples" class="toc">EXAMPLES</a></li>
    <li class="toc"><a href="#requirements" class="toc">REQUIREMENTS</a></li>
    <li class="toc"><a href="#see-also" class="toc">SEE ALSO</a></li>
    <li class="toc"><a href="#authors" class="toc">AUTHORS</a></li>
</ul>
</div>
<h2><a name="description">DESCRIPTION</a></h2>
An increasing amount of spatio-temporal data, like climate observations and forecast data
or satellite imagery is provided through <a href="https://www.unidata.ucar.edu/software/tds/">
Thredds Data Servers (TDS)</a>.

<p>
<em>m.crawl.thredds</em> crawls the catalog of a Thredds Data Server (TDS)
starting from the catalog-URL provided in the <b>input</b>. It is a wrapper
module around the Python library <a href="https://github.com/ioos/thredds_crawler">
thredds_crawler</a>. <em>m.crawl.thredds</em> returns a list of dataset URLs,
optionally with additional information on the service type and data size.
Depending on the format of the crawled datasets, the output of
<em>m.crawl.thredds</em> may be used as input to <em>t.rast.import.netcdf</em>.

<p>
The returned list of datasets can be filtered:
<ul>
  <li>based on the modification time of the dataset using a range of relevant
timestamps defined by the <b>modified_before</b> and <b>modified_after</b> option(s)</li>
  <li>based on the file name using a regular expression in the <b>filter</b> option.</li>
</ul>
<p>
Authentication to the Thredds Server (if required) can be provided either through
a text-file, where the first line contains the username and the second the password,
or interactive user input (if <i>authentication=-</i>).
Alternatively, username and password can be passed through environment variables
<i>THREDDS_USER</i> and <i>THREDDS_PASSWORD</i>.

<h2><a name="notes">NOTES</a></h2>
The Thredds data catalog is crawled recursively. Providing the URL to the
root of a catalog on a Thredds server with many hirarchies and datasets can
therefore be quite time consuming, even if executed in parallel (<b>nprocs</b> > 1).

<h2><a name="examples">EXAMPLES</a></h2>
List modelled climate observation datasets from the Norwegian Meteorological Institute (met.no)

<div class="code"><pre>
# Get a list of all data for "seNorge"
m.crawl.thredds input="https://thredds.met.no/thredds/catalog/senorge/seNorge_2018/Archive/catalog.xml"
https://thredds.met.no/thredds/fileServer/senorge/seNorge_2018/Archive/seNorge2018_2021.nc
(...)
https://thredds.met.no/thredds/fileServer/senorge/seNorge_2018/Archive/seNorge2018_1957.nc

# Get a list of the most recent data for "seNorge"
m.crawl.thredds input="https://thredds.met.no/thredds/catalog/senorge/seNorge_2018/Archive/catalog.xml" modified_after="2021-02-01"
https://thredds.met.no/thredds/fileServer/senorge/seNorge_2018/Archive/seNorge2018_2021.nc
https://thredds.met.no/thredds/fileServer/senorge/seNorge_2018/Archive/seNorge2018_2020.nc

# Get a list of the most recent data for "seNorge" that match a regular expression
# Note the "." beofor the "*"
m.crawl.thredds input="https://thredds.met.no/thredds/catalog/senorge/seNorge_2018/Archive/catalog.xml" \
modified_after="2021-02-01" filter=".*2018_202.*"
https://thredds.met.no/thredds/fileServer/senorge/seNorge_2018/Archive/seNorge2018_2021.nc
https://thredds.met.no/thredds/fileServer/senorge/seNorge_2018/Archive/seNorge2018_2020.nc
</pre></div>

List Sentinel-2A data from the Norwegian Ground Segment (NBS) for the 2. Feb 2021

<div class="code"><pre>
# Get a list of all Sentinel-2A data for 2. Feb 2021 with dataset size
m.crawl.thredds input="https://nbstds.met.no/thredds/catalog/NBS/S2A/2021/02/28/catalog.xml" print="data_size"
https://nbstds.met.no/thredds/fileServer/NBS/S2A/2021/02/28/S2A_MSIL1C_20210228T103021_N0202_R108_T35WPU_20210228T201033_DTERRENGDATA.nc|107.6
(...)
https://nbstds.met.no/thredds/fileServer/NBS/S2A/2021/02/28/S2A_MSIL1C_20210228T103021_N0202_R108_T32VNL_20210228T201033_DTERRENGDATA.nc|166.1

# Get a list of WMS end-points to all Sentinel-2A data for 2. Feb 2021
m.crawl.thredds input="https://nbstds.met.no/thredds/catalog/NBS/S2A/2021/02/28/catalog.xml" services="wms"
https://nbstds.met.no/thredds/wms/NBS/S2A/2021/02/28/S2A_MSIL1C_20210228T103021_N0202_R108_T35WPU_20210228T201033_DTERRENGDATA.nc
(...)
https://nbstds.met.no/thredds/wms/NBS/S2A/2021/02/28/S2A_MSIL1C_20210228T103021_N0202_R108_T32VNL_20210228T201033_DTERRENGDATA.nc
</pre></div>

<h2><a name="requirements">REQUIREMENTS</a></h2>
<a href="https://github.com/ioos/thredds_crawler">thredds_crawler</a>

<h2><a name="see-also">SEE ALSO</a></h2>
<em>
<a href="file:///usr/lib/grass78/docs/html/i.sentinel.download.html">i.sentinel.download</a>,
<a href="file:///usr/lib/grass78/docs/html/t.rast.import.netcdf.html">t.rast.import.netcdf</a>
</em>

<h2><a name="authors">AUTHORS</a></h2>
Stefan Blumentrath, <a href="https://geospatial.ncsu.edu/geoforall/">Norwegian Institute for Nature Research (NINA), Oslo</a><h2>SOURCE CODE</h2>
<p>Available at: <a href="https://trac.osgeo.org/grass/browser/grass-addons/grass7/miscellaneous/m.crawl.thredds">m.crawl.thredds source code</a> (<a href="https://trac.osgeo.org/grass/browser/grass-addons/grass7/miscellaneous/m.crawl.thredds">history</a>)</p>
<hr class="header">
<p>
<a href="file:///usr/lib/grass78/docs/html/index.html">Main index</a> |
<a href="file:///usr/lib/grass78/docs/html/miscellaneous.html">Miscellaneous index</a> |
<a href="file:///usr/lib/grass78/docs/html/topics.html">Topics index</a> |
<a href="file:///usr/lib/grass78/docs/html/keywords.html">Keywords index</a> |
<a href="file:///usr/lib/grass78/docs/html/graphical_index.html">Graphical index</a> |
<a href="file:///usr/lib/grass78/docs/html/full_index.html">Full index</a>
</p>
<p>
&copy; 2003-2019
<a href="http://grass.osgeo.org">GRASS Development Team</a>,
GRASS GIS 7.8.2 Reference Manual
</p>

</div>
</body>
</html>
